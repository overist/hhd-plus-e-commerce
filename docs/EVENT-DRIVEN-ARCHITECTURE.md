# ğŸ“Š ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ ì„¤ê³„ ë³´ê³ ì„œ

> ì´ ë¬¸ì„œëŠ” ê²°ì œ ì²˜ë¦¬ ìœ ì¦ˆì¼€ì´ìŠ¤ì— ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¥¼ ì ìš©í•œ ì‚¬ë¡€ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.
> ê²°ì œ ì²˜ë¦¬ ìœ ì¦ˆì¼€ì´ìŠ¤ì˜ ìƒì„¸ ì´ë²¤íŠ¸ êµ¬ì„± ë° íë¦„ë„ëŠ” [EVENT-FLOW-DIAGRAM.md](./EVENT-FLOW-DIAGRAM.md) ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

---

## ğŸ“‘ ëª©ì°¨

1. [ê¸°ì¡´ ì•„í‚¤í…ì²˜ ë¶„ì„](#1-ê¸°ì¡´-ì•„í‚¤í…ì²˜-ë¶„ì„)
2. [ì´ë²¤íŠ¸ ê¸°ë°˜ ì„¤ê³„ ì ìš©](#2-ì´ë²¤íŠ¸-ê¸°ë°˜-ì„¤ê³„-ì ìš©)
3. [íŠ¸ëœì­ì…˜ ë¶„ë¦¬ ì „ëµ](#3-íŠ¸ëœì­ì…˜-ë¶„ë¦¬-ì „ëµ)
4. [ë°°í¬ ë‹¨ìœ„ ë„ë©”ì¸ ë¶„ë¦¬](#4-ë°°í¬-ë‹¨ìœ„-ë„ë©”ì¸-ë¶„ë¦¬)
5. [í•µì‹¬ ë¡œì§ê³¼ ë¶€ê°€ ë¡œì§ ë¶„ë¦¬](#5-í•µì‹¬-ë¡œì§ê³¼-ë¶€ê°€-ë¡œì§-ë¶„ë¦¬)
6. [ê²°ë¡ ](#6-ê²°ë¡ )

---

## 1. ê¸°ì¡´ ì•„í‚¤í…ì²˜ ë¶„ì„

### 1.1 ê¸°ì¡´ êµ¬ì¡° (AS-IS)

ê¸°ì¡´ ê²°ì œ ì²˜ë¦¬ ë¡œì§ì€ ì´ë¯¸ íŠ¸ëœì­ì…˜ì„ ë¶„ë¦¬í•˜ê³  ë³´ìƒ íŠ¸ëœì­ì…˜ì„ ì ìš©í•œ êµ¬ì¡°ì˜€ìŠµë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ê¸°ì¡´ íŠ¸ëœì­ì…˜ ë¶„ë¦¬ êµ¬ì¡° (AS-IS)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     ProcessPaymentUseCase                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ Transaction 1: (ì£¼ë¬¸ì¡°íšŒ / ì¬ê³ ì°¨ê° / ì¿ í°ì‚¬ìš©)                  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ ProductService.confirmPaymentStock()                          â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ CouponService.useCoupon()                                     â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                              â”‚                                          â”‚ â”‚
â”‚  â”‚                              â–¼                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ Transaction 2: ì”ì•¡ ì°¨ê°                                         â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ UserService.deductBalance()                                   â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                              â”‚                                          â”‚ â”‚
â”‚  â”‚                              â–¼                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ ì™¸ë¶€ ì²˜ë¦¬: í”Œë«í¼ ì „ì†¡                                           â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ DataPlatformService.send()                                    â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  catch (error) {                                                         â”‚ â”‚
â”‚  â”‚    // íŠ¸ëœì­ì…˜ ì»¤ë°‹ ìƒíƒœ ì²´í¬ í›„ ê°œë³„ ë³´ìƒ íŠ¸ëœì­ì…˜ ìˆ˜í–‰               â”‚ â”‚
â”‚  â”‚    if (stockCommitted) await rollbackStock();                           â”‚ â”‚
â”‚  â”‚    if (couponUsed) await rollbackCoupon();                              â”‚ â”‚
â”‚  â”‚  }                                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ê¸°ì¡´ êµ¬ì¡°ì˜ í•œê³„

| ë¬¸ì œ                   | ì˜í–¥                                               | ì‹¬ê°ë„  |
| ---------------------- | -------------------------------------------------- | ------- |
| **ê°•í•œ ê²°í•©ë„**        | UseCaseê°€ Product, Coupon, User ì„œë¹„ìŠ¤ì— ì§ì ‘ ì˜ì¡´ | ğŸ”´ ë†’ìŒ |
| **ë³´ìƒ íŠ¸ëœì­ì…˜ ì§‘ì¤‘** | catch ë¸”ë¡ì—ì„œ ì»¤ë°‹ ìƒíƒœ ì²´í¬ ë° ë¡¤ë°± ë¡œì§ ë³µì¡    | ğŸŸ¡ ì¤‘ê°„ |
| **í™•ì¥ì„± ë¶€ì¡±**        | ìƒˆ ê¸°ëŠ¥(ì•Œë¦¼, ë¶„ì„ ë“±) ì¶”ê°€ ì‹œ UseCase ìˆ˜ì • í•„ìˆ˜   | ğŸŸ¡ ì¤‘ê°„ |
| **ì½”ë“œ ê´€ì‹¬ì‚¬ í˜¼ì¬**   | í•µì‹¬ ë¡œì§ê³¼ ë¶€ê°€ ë¡œì§ì´ í˜¼ì¬ë˜ì–´ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€   | ğŸŸ¢ ë‚®ìŒ |

---

## 2. ì´ë²¤íŠ¸ ê¸°ë°˜ ì„¤ê³„ ì ìš©

### 2.1 ê°œì„ ëœ ì•„í‚¤í…ì²˜ (TO-BE)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ì´ë²¤íŠ¸ ê¸°ë°˜ ì™„ì „ ë¶„ë¦¬ êµ¬ì¡° (TO-BE) - Zero Coupling               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ProcessPaymentUseCase (ì˜¤ì§ EventEmitterì™€ OrderServiceë§Œ ì˜ì¡´)       â”‚ â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚   â€¢ ProductService âŒ ì˜ì¡´ ì—†ìŒ                                         â”‚ â”‚
â”‚  â”‚   â€¢ CouponService âŒ ì˜ì¡´ ì—†ìŒ                                          â”‚ â”‚
â”‚  â”‚   â€¢ UserService âŒ ì˜ì¡´ ì—†ìŒ                                            â”‚ â”‚
â”‚  â”‚   â€¢ DataPlatformService âŒ ì˜ì¡´ ì—†ìŒ                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚                                           â”‚
â”‚                          ì´ë²¤íŠ¸ ë°œí–‰ë§Œ ìˆ˜í–‰                                  â”‚
â”‚                                  â”‚                                           â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚          â”‚                       â”‚                           â”‚              â”‚
â”‚          â–¼                       â–¼                           â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚    order.     â”‚       â”‚    order.     â”‚           â”‚    order.     â”‚     â”‚
â”‚  â”‚  processing   â”‚       â”‚   payment     â”‚           â”‚  processed    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚          â”‚                       â”‚                           â”‚              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                 â”‚                     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚           â”‚                 â”‚                     â”‚           â”‚       â”‚
â”‚    â–¼           â–¼                 â–¼                     â–¼           â–¼       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚Productâ”‚   â”‚Couponâ”‚         â”‚ User â”‚             â”‚Order â”‚   â”‚Productâ”‚     â”‚
â”‚ â”‚Module â”‚   â”‚Moduleâ”‚         â”‚Moduleâ”‚             â”‚Moduleâ”‚   â”‚Module â”‚     â”‚
â”‚ â”‚ì¬ê³    â”‚   â”‚ì¿ í°  â”‚         â”‚ì”ì•¡  â”‚             â”‚ë°ì´í„°â”‚   â”‚íŒë§¤   â”‚     â”‚
â”‚ â”‚í™•ì •   â”‚   â”‚ì‚¬ìš©  â”‚         â”‚ì°¨ê°  â”‚             â”‚í”Œë«í¼â”‚   â”‚ë­í‚¹   â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚     â”‚           â”‚                â”‚                                         â”‚
â”‚     â”‚           â”‚                â”‚                                         â”‚
â”‚     â–¼           â–¼                â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ê° ë„ë©”ì¸ì´ ìì²´ ë³´ìƒ íŠ¸ëœì­ì…˜ ê´€ë¦¬                â”‚   â”‚
â”‚  â”‚   ì‹¤íŒ¨ ì‹œ order.processing.fail / order.payment.fail ì´ë²¤íŠ¸ ë°œí–‰    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                               â”‚
â”‚  âœ… í•µì‹¬: UseCaseëŠ” ì´ë²¤íŠ¸ë§Œ ë°œí–‰, ê° ë„ë©”ì¸ì´ ìì‹ ì˜ íŠ¸ëœì­ì…˜ì„ ë…ë¦½ ê´€ë¦¬  â”‚
â”‚  âœ… íŠ¸ëœì­ì…˜: ì¬ê³ /ì¿ í°/ì”ì•¡ ëª¨ë‘ ê°œë³„ íŠ¸ëœì­ì…˜ (ë¬¶ì—¬ìˆì§€ ì•ŠìŒ)             â”‚
â”‚  âœ… ë³´ìƒ: ê° ë¦¬ìŠ¤ë„ˆê°€ ì‹¤íŒ¨ ì´ë²¤íŠ¸ ë°œí–‰ â†’ ë‹¤ë¥¸ ë¦¬ìŠ¤ë„ˆë“¤ì´ ë¡¤ë°± ìˆ˜í–‰          â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 í•µì‹¬ ì„¤ê³„ ì›ì¹™: ì™„ì „í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì™„ì „í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ (100% Decoupling)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ¯ ProcessPaymentUseCaseì˜ ì—­í•  (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°)                        â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ constructor(                                                             â”‚ â”‚
â”‚  â”‚   orderService: OrderDomainService,  // âœ… ìì‹ ì˜ ë„ë©”ì¸ë§Œ ì˜ì¡´         â”‚ â”‚
â”‚  â”‚   eventEmitter: EventEmitter2,       // âœ… ì´ë²¤íŠ¸ ë°œí–‰ë§Œ ë‹´ë‹¹           â”‚ â”‚
â”‚  â”‚   redisLockService: RedisLockService // âœ… ë™ì‹œì„± ì œì–´                  â”‚ â”‚
â”‚  â”‚ )                                                                        â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ // âŒ ProductService ì˜ì¡´ ì—†ìŒ                                          â”‚ â”‚
â”‚  â”‚ // âŒ CouponService ì˜ì¡´ ì—†ìŒ                                           â”‚ â”‚
â”‚  â”‚ // âŒ UserService ì˜ì¡´ ì—†ìŒ                                             â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”§ ê° ë„ë©”ì¸ ë¦¬ìŠ¤ë„ˆì˜ ì—­í•  (ììœ¨ì  ì²˜ë¦¬)                                â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ Product: OnOrderProcessingListener                                       â”‚ â”‚
â”‚  â”‚   â†’ ìì²´ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì¬ê³  í™•ì • ì°¨ê°                                    â”‚ â”‚
â”‚  â”‚   â†’ ì‹¤íŒ¨ ì‹œ order.processing.fail ì´ë²¤íŠ¸ ë°œí–‰                           â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ Coupon: OnOrderProcessingListener                                        â”‚ â”‚
â”‚  â”‚   â†’ ìì²´ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì¿ í° ì‚¬ìš© ì²˜ë¦¬ (Redis + DB)                       â”‚ â”‚
â”‚  â”‚   â†’ ì‹¤íŒ¨ ì‹œ order.processing.fail ì´ë²¤íŠ¸ ë°œí–‰                           â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ User: OnOrderPaymentListener                                             â”‚ â”‚
â”‚  â”‚   â†’ ìì²´ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì”ì•¡ ì°¨ê° (ë‚™ê´€ì  ì ê¸ˆ)                           â”‚ â”‚
â”‚  â”‚   â†’ ì‹¤íŒ¨ ì‹œ order.payment.fail ì´ë²¤íŠ¸ ë°œí–‰                              â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ì´ë²¤íŠ¸ ë§¤íŠ¸ë¦­ìŠ¤

| ì´ë²¤íŠ¸                  | ë°œí–‰ì                       | êµ¬ë…ì (ë¦¬ìŠ¤ë„ˆ)                       | ì²˜ë¦¬ ë‚´ìš©          | ë™ê¸°/ë¹„ë™ê¸° |
| ----------------------- | ---------------------------- | ------------------------------------- | ------------------ | ----------- |
| `order.processing`      | ProcessPaymentUseCase        | Product: OnOrderProcessingListener    | ì¬ê³  í™•ì • ì°¨ê°     | ë™ê¸°        |
| `order.processing`      | ProcessPaymentUseCase        | Coupon: OnOrderProcessingListener     | ì¿ í° ì‚¬ìš© ì²˜ë¦¬     | ë™ê¸°        |
| `order.payment`         | ProcessPaymentUseCase        | User: OnOrderPaymentListener          | ì”ì•¡ ì°¨ê°          | ë™ê¸°        |
| `order.processed`       | ProcessPaymentUseCase        | Order: OnOrderProcessedListener       | ë°ì´í„° í”Œë«í¼ ì „ì†¡ | ë¹„ë™ê¸°      |
| `order.processed`       | ProcessPaymentUseCase        | Product: OnOrderProcessedListener     | íŒë§¤ ë­í‚¹ ì—…ë°ì´íŠ¸ | ë¹„ë™ê¸°      |
| `order.processing.fail` | ê° ë¦¬ìŠ¤ë„ˆ (ì‹¤íŒ¨ ì‹œ)          | Product: OnOrderFailListener          | ì¬ê³  ë¡¤ë°±          | ë™ê¸°        |
| `order.processing.fail` | ê° ë¦¬ìŠ¤ë„ˆ (ì‹¤íŒ¨ ì‹œ)          | Coupon: OnOrderProcessingFailListener | ì¿ í° ë¡¤ë°±          | ë™ê¸°        |
| `order.payment.fail`    | User: OnOrderPaymentListener | Product: OnOrderFailListener          | ì¬ê³  ë¡¤ë°±          | ë™ê¸°        |
| `order.payment.fail`    | User: OnOrderPaymentListener | Coupon: OnOrderFailListener           | ì¿ í° ë¡¤ë°±          | ë™ê¸°        |
| `order.payment.fail`    | User: OnOrderPaymentListener | Order: OnOrderFailListener            | ì£¼ë¬¸ ìƒíƒœ ë¡¤ë°±     | ë™ê¸°        |

### 2.4 êµ¬í˜„ ì½”ë“œ (í•µì‹¬ ë¶€ë¶„)

```typescript
// ProcessPaymentUseCase - ì´ë²¤íŠ¸ ë°œí–‰ë§Œ ë‹´ë‹¹
async processPayment(cmd: ProcessPaymentCommand) {
  // 1ë‹¨ê³„: í•µì‹¬ ë¡œì§ (ë™ê¸°) - ì¬ê³  ì°¨ê°, ì¿ í° ì‚¬ìš©
  await this.eventEmitter.emitAsync('order.processing', event);

  // 2ë‹¨ê³„: í•µì‹¬ ë¡œì§ (ë™ê¸°) - ì”ì•¡ ì°¨ê°
  await this.eventEmitter.emitAsync('order.payment', event);

  // 3ë‹¨ê³„: ë¶€ê°€ ë¡œì§ (ë¹„ë™ê¸°) - ë°ì´í„° í”Œë«í¼ ì „ì†¡, ë­í‚¹ ì§‘ê³„
  this.eventEmitter.emit('order.processed', event); // await ì—†ìŒ!

  return ProcessPaymentResult.from(order, user);
}

// OnOrderProcessedListener - ë°ì´í„° í”Œë«í¼ ì „ì†¡
@OnEvent('order.processed')
async handle(event: OrderProcessedEvent) {
  try {
    await this.sendToDataPlatform(event);
  } catch (error) {
    // âœ… ì‹¤íŒ¨í•´ë„ ê²°ì œì— ì˜í–¥ ì—†ìŒ
    this.logger.error('ë°ì´í„° í”Œë«í¼ ì „ì†¡ ì‹¤íŒ¨', error);
  }
}
```

---

## 3. íŠ¸ëœì­ì…˜ ë¶„ë¦¬ ì „ëµ

### 3.1 í•µì‹¬/ë¶€ê°€ ì‘ì—… ë¶„ë¥˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        í•µì‹¬/ë¶€ê°€ ì‘ì—… ë¶„ë¥˜ ê¸°ì¤€                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”´ í•µì‹¬ ì‘ì—… (Core Operations) - íŠ¸ëœì­ì…˜ ë‚´ë¶€                          â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ â€¢ ì‹¤íŒ¨ ì‹œ ì „ì²´ ê²°ì œê°€ ì‹¤íŒ¨í•´ì•¼ í•˜ëŠ” ì‘ì—…                                â”‚ â”‚
â”‚  â”‚ â€¢ ë°ì´í„° ì¼ê´€ì„±ì´ ë°˜ë“œì‹œ ë³´ì¥ë˜ì–´ì•¼ í•˜ëŠ” ì‘ì—…                           â”‚ â”‚
â”‚  â”‚ â€¢ ê°•í•œ ì¼ê´€ì„±ì„ ìœ„í•´ ë³´ìƒ íŠ¸ëœì­ì…˜ì´ í•„ìš”í•œ ì‘ì—…                         â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ì˜ˆì‹œ:                                                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ì¬ê³  í™•ì • ì°¨ê° (order.processing)                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ì¿ í° ì‚¬ìš© ì²˜ë¦¬ (order.processing)                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ì”ì•¡ ì°¨ê° (order.payment)                                          â”‚ â”‚
â”‚  â”‚  â””â”€â”€ ì£¼ë¬¸ ìƒíƒœ ë³€ê²½                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸŸ¢ ë¶€ê°€ ì‘ì—… (Side Effects) - íŠ¸ëœì­ì…˜ ì™¸ë¶€                             â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ â€¢ ì‹¤íŒ¨í•´ë„ í•µì‹¬ ê¸°ëŠ¥ì— ì˜í–¥ì„ ì£¼ë©´ ì•ˆ ë˜ëŠ” ì‘ì—…                         â”‚ â”‚
â”‚  â”‚ â€¢ ìµœì¢… ì¼ê´€ì„±(Eventual Consistency)ì´ í—ˆìš©ë˜ëŠ” ì‘ì—…                     â”‚ â”‚
â”‚  â”‚ â€¢ ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ ì‘ì—…                                                 â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ì˜ˆì‹œ:                                                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ë°ì´í„° í”Œë«í¼ ì „ì†¡ (order.processed)                               â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ì¸ê¸°ìƒí’ˆ ë­í‚¹ ì—…ë°ì´íŠ¸ (order.processed)                           â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ì•Œë¦¼ ë°œì†¡                                                          â”‚ â”‚
â”‚  â”‚  â””â”€â”€ ë¡œê¹…/ëª¨ë‹ˆí„°ë§                                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ë™ê¸°/ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì„ íƒ ê¸°ì¤€

| ê¸°ì¤€          | ë™ê¸° ì´ë²¤íŠ¸ (emitAsync)         | ë¹„ë™ê¸° ì´ë²¤íŠ¸ (emit)                |
| ------------- | ------------------------------- | ----------------------------------- |
| **ì‹¤íŒ¨ ì²˜ë¦¬** | ì˜ˆì™¸ ì „íŒŒ, íŠ¸ëœì­ì…˜ ë¡¤ë°±        | ë¡œê¹… í›„ ë³„ë„ ì²˜ë¦¬                   |
| **ì‘ë‹µ ëŒ€ê¸°** | ì²˜ë¦¬ ì™„ë£Œê¹Œì§€ ëŒ€ê¸°              | Fire & Forget                       |
| **ì‚¬ìš© ì˜ˆì‹œ** | ì¬ê³  ì°¨ê°, ì¿ í° ì‚¬ìš©, ì”ì•¡ ì°¨ê° | ë°ì´í„° í”Œë«í¼ ì „ì†¡, ë­í‚¹ ì§‘ê³„       |
| **ì²˜ë¦¬ ë³´ì¥** | ì¦‰ì‹œ ì²˜ë¦¬ ë° ê²°ê³¼ í™•ì¸          | ì²˜ë¦¬ ê²°ê³¼ ë¹„ë³´ì¥ (ë³„ë„ ì¬ì‹œë„ í•„ìš”) |

### 3.3 íŠ¸ëœì­ì…˜ ë¶„ë¦¬ì— ë”°ë¥¸ ë¬¸ì œì ê³¼ í•´ê²° ì „ëµ

íŠ¸ëœì­ì…˜ì„ ë¶„ë¦¬í•˜ë©´ ë°ì´í„° ì¼ê´€ì„± ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ëŒ€í•œ ë¬¸ì œì ê³¼ í•´ê²° ë°©ì•ˆì„ ì •ë¦¬í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     íŠ¸ëœì­ì…˜ ë¶„ë¦¬ ì‹œ ë°œìƒ ê°€ëŠ¥í•œ ë¬¸ì œì                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”´ ë¬¸ì œ 1: ë¶€ë¶„ ì‹¤íŒ¨ë¡œ ì¸í•œ ë°ì´í„° ë¶ˆì¼ì¹˜                               â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ì‹œë‚˜ë¦¬ì˜¤: ì¬ê³  ì°¨ê° âœ… â†’ ì¿ í° ì‚¬ìš© âœ… â†’ ì”ì•¡ ì°¨ê° âŒ (ì”ì•¡ ë¶€ì¡±)        â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ë°œìƒ ë¬¸ì œ:                                                               â”‚ â”‚
â”‚  â”‚ â€¢ ì¬ê³ ëŠ” ì°¨ê°ë˜ì—ˆìœ¼ë‚˜ ê²°ì œ ì‹¤íŒ¨                                         â”‚ â”‚
â”‚  â”‚ â€¢ ì¿ í°ì€ ì‚¬ìš©ë˜ì—ˆìœ¼ë‚˜ ì‹¤ì œ êµ¬ë§¤ ì•ˆë¨                                    â”‚ â”‚
â”‚  â”‚ â€¢ ë°ì´í„° ë¶ˆì¼ì¹˜ ìƒíƒœ ë°œìƒ                                               â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ âœ… í•´ê²°: Saga íŒ¨í„´ ê¸°ë°˜ ë³´ìƒ íŠ¸ëœì­ì…˜                                   â”‚ â”‚
â”‚  â”‚ â€¢ order.payment.fail ì´ë²¤íŠ¸ ë°œí–‰                                        â”‚ â”‚
â”‚  â”‚ â€¢ Product ë¦¬ìŠ¤ë„ˆ: ì¬ê³  ë¡¤ë°± (ìì²´ íŠ¸ëœì­ì…˜)                             â”‚ â”‚
â”‚  â”‚ â€¢ Coupon ë¦¬ìŠ¤ë„ˆ: ì¿ í° ì‚¬ìš© ì·¨ì†Œ (ìì²´ íŠ¸ëœì­ì…˜)                         â”‚ â”‚
â”‚  â”‚ â€¢ Order ë¦¬ìŠ¤ë„ˆ: ì£¼ë¬¸ ìƒíƒœ ë¡¤ë°± (ìì²´ íŠ¸ëœì­ì…˜)                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”´ ë¬¸ì œ 2: ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤íŒ¨ ì‹œ ë³µêµ¬ ë¶ˆê°€                              â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ì‹œë‚˜ë¦¬ì˜¤: ì”ì•¡ ì°¨ê° ì‹¤íŒ¨ â†’ ì¬ê³  ë¡¤ë°± ì‹œë„ â†’ ë¡¤ë°±ë„ ì‹¤íŒ¨ âŒ             â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ë°œìƒ ë¬¸ì œ:                                                               â”‚ â”‚
â”‚  â”‚ â€¢ ì¬ê³ ê°€ ì°¨ê°ëœ ìƒíƒœë¡œ ë‚¨ìŒ                                             â”‚ â”‚
â”‚  â”‚ â€¢ ìë™ ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ìƒíƒœ                                               â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ âœ… í•´ê²°: ë¡œê¹… + ìˆ˜ë™ ë³µêµ¬ + ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜                             â”‚ â”‚
â”‚  â”‚ â€¢ ë³´ìƒ ì‹¤íŒ¨ ì‹œ ìƒì„¸ ë¡œê·¸ ê¸°ë¡                                           â”‚ â”‚
â”‚  â”‚ â€¢ ì•Œë¦¼ ë°œì†¡ (ìš´ì˜íŒ€ ìˆ˜ë™ ê°œì…)                                          â”‚ â”‚
â”‚  â”‚ â€¢ í–¥í›„: Dead Letter Queue + ì¬ì‹œë„ êµ¬í˜„                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”´ ë¬¸ì œ 3: ì´ë²¤íŠ¸ ìœ ì‹¤                                                  â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ì‹œë‚˜ë¦¬ì˜¤: order.processed ì´ë²¤íŠ¸ ë°œí–‰ í›„ ì• í”Œë¦¬ì¼€ì´ì…˜ í¬ë˜ì‹œ            â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ë°œìƒ ë¬¸ì œ:                                                               â”‚ â”‚
â”‚  â”‚ â€¢ ë°ì´í„° í”Œë«í¼ì— ì£¼ë¬¸ ì •ë³´ ë¯¸ì „ì†¡                                      â”‚ â”‚
â”‚  â”‚ â€¢ ì¸ê¸°ìƒí’ˆ ë­í‚¹ ì§‘ê³„ ëˆ„ë½                                               â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ âœ… í˜„ì¬ í•´ê²°: ë¶€ê°€ ë¡œì§ìœ¼ë¡œ ë¶„ë¥˜í•˜ì—¬ í•µì‹¬ ë¡œì§ì— ì˜í–¥ ì—†ìŒ              â”‚ â”‚
â”‚  â”‚ âœ… í–¥í›„ í•´ê²°: Outbox íŒ¨í„´ + Message Broker ë„ì…                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”´ ë¬¸ì œ 4: ë¦¬ìŠ¤ë„ˆ ì‹¤í–‰ ìˆœì„œ ë³´ì¥ ë¶ˆê°€                                   â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ì‹œë‚˜ë¦¬ì˜¤: order.processing ì´ë²¤íŠ¸ì— Product, Coupon ë¦¬ìŠ¤ë„ˆê°€ ë™ì‹œ ì‹¤í–‰  â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ ë°œìƒ ë¬¸ì œ:                                                               â”‚ â”‚
â”‚  â”‚ â€¢ ë¦¬ìŠ¤ë„ˆ ì‹¤í–‰ ìˆœì„œê°€ ë³´ì¥ë˜ì§€ ì•ŠìŒ                                      â”‚ â”‚
â”‚  â”‚ â€¢ ì˜ì¡´ ê´€ê³„ê°€ ìˆëŠ” ì‘ì—… ì‹œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥                               â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ âœ… í•´ê²°: ë¦¬ìŠ¤ë„ˆ ê°„ ì˜ì¡´ì„± ì œê±°                                          â”‚ â”‚
â”‚  â”‚ â€¢ ê° ë¦¬ìŠ¤ë„ˆëŠ” ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„                           â”‚ â”‚
â”‚  â”‚ â€¢ ìˆœì„œê°€ í•„ìš”í•œ ê²½ìš° ì´ë²¤íŠ¸ë¥¼ ë‹¨ê³„ë³„ë¡œ ë¶„ë¦¬                             â”‚ â”‚
â”‚  â”‚   (order.processing â†’ order.payment â†’ order.processed)                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 íŠ¸ëœì­ì…˜ ë²”ìœ„ ë¹„êµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          íŠ¸ëœì­ì…˜ êµ¬ì¡° ë¹„êµ                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  [AS-IS: ë¶„ë¦¬ëœ íŠ¸ëœì­ì…˜ + UseCase ì§ì ‘ ì˜ì¡´]                                â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ProcessPaymentUseCase                                                    â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ productService.confirmStock()  â”€â”€â”                                  â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ couponService.useCoupon()    â”€â”€â”€â”€â”¼â”€â”€ Transaction 1                  â”‚ â”‚
â”‚  â”‚ â”‚                                    â”‚                                  â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ userService.deductBalance() â”€â”€â”€â”€â”€â”´â”€â”€ Transaction 2                  â”‚ â”‚
â”‚  â”‚ â”‚                                                                        â”‚ â”‚
â”‚  â”‚ â””â”€â”€ catch { ì»¤ë°‹ ìƒíƒœ ì²´í¬ í›„ ê°œë³„ ë¡¤ë°± }  â—„â”€â”€ ë³´ìƒ ë¡œì§ ì§‘ì¤‘ ğŸ˜°        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  âš ï¸ ë¬¸ì œ: UseCaseê°€ ëª¨ë“  ì„œë¹„ìŠ¤ì— ì§ì ‘ ì˜ì¡´, ë³´ìƒ ë¡œì§ ë³µì¡                  â”‚
â”‚                                                                               â”‚
â”‚  [TO-BE: ì™„ì „ ë¶„ë¦¬ëœ ê°œë³„ íŠ¸ëœì­ì…˜ + ì´ë²¤íŠ¸ ê¸°ë°˜]                            â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ProcessPaymentUseCase                                                    â”‚ â”‚
â”‚  â”‚ â””â”€â”€ eventEmitter.emit() ë§Œ í˜¸ì¶œ  â—„â”€â”€ ì˜¤ì§ ì´ë²¤íŠ¸ ë°œí–‰ë§Œ! ğŸ˜Š             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                               â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚          â–¼                   â–¼                   â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ Product Module  â”‚ â”‚ Coupon Module   â”‚ â”‚  User Module    â”‚               â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚               â”‚
â”‚  â”‚ Transaction A   â”‚ â”‚ Transaction B   â”‚ â”‚ Transaction C   â”‚               â”‚
â”‚  â”‚ ì¬ê³  í™•ì • ì°¨ê°  â”‚ â”‚ ì¿ í° ì‚¬ìš© ì²˜ë¦¬   â”‚ â”‚ ì”ì•¡ ì°¨ê°        â”‚               â”‚
â”‚  â”‚ ì‹¤íŒ¨â†’ìì²´ ë¡¤ë°±  â”‚ â”‚ ì‹¤íŒ¨â†’ìì²´ ë¡¤ë°±   â”‚ â”‚ ì‹¤íŒ¨â†’ìì²´ ë¡¤ë°±   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                               â”‚
â”‚  âœ… ê° ë„ë©”ì¸ì´ ìì‹ ì˜ íŠ¸ëœì­ì…˜ê³¼ ë³´ìƒ ë¡œì§ì„ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬                â”‚
â”‚  âœ… UseCaseëŠ” ë„ë©”ì¸ ì„œë¹„ìŠ¤ì— ì „í˜€ ì˜ì¡´í•˜ì§€ ì•ŠìŒ (100% ê²°í•©ë„ ì œê±°)          â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ë°°í¬ ë‹¨ìœ„ ë„ë©”ì¸ ë¶„ë¦¬

### 4.1 ë„ë©”ì¸ë³„ ëª¨ë“ˆ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë°°í¬ ë‹¨ìœ„ ë„ë©”ì¸ ë¶„ë¦¬ êµ¬ì¡°                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  ê° ë„ë©”ì¸ì€ ë…ë¦½ëœ ëª¨ë“ˆë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìœ¼ë©°, í–¥í›„ MSA ì „í™˜ ì‹œ                 â”‚
â”‚  ê°œë³„ ì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬ ê°€ëŠ¥í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.                                       â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“¦ ORDER ë„ë©”ì¸ (src/order/)                                            â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ ì±…ì„: ì£¼ë¬¸ ìƒì„±, ì£¼ë¬¸ ìƒíƒœ ê´€ë¦¬, ê²°ì œ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜                     â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ order.module.ts              # ëª¨ë“ˆ ì •ì˜                            â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ application/                                                        â”‚ â”‚
â”‚  â”‚ â”‚   â”œâ”€â”€ create-order.use-case.ts                                       â”‚ â”‚
â”‚  â”‚ â”‚   â”œâ”€â”€ process-payment.use-case.ts   # ì´ë²¤íŠ¸ ë°œí–‰ (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°)   â”‚ â”‚
â”‚  â”‚ â”‚   â”œâ”€â”€ events/                       # ë„ë©”ì¸ ì´ë²¤íŠ¸ ì •ì˜              â”‚ â”‚
â”‚  â”‚ â”‚   â”‚   â”œâ”€â”€ order-processing.event.ts                                  â”‚ â”‚
â”‚  â”‚ â”‚   â”‚   â”œâ”€â”€ order-payment.event.ts                                     â”‚ â”‚
â”‚  â”‚ â”‚   â”‚   â””â”€â”€ order-processed.event.ts                                   â”‚ â”‚
â”‚  â”‚ â”‚   â””â”€â”€ listeners/                    # ì´ë²¤íŠ¸ êµ¬ë…ì                   â”‚ â”‚
â”‚  â”‚ â”‚       â”œâ”€â”€ on-order-processed.listener.ts  # ë°ì´í„° í”Œë«í¼ ì „ì†¡       â”‚ â”‚
â”‚  â”‚ â”‚       â””â”€â”€ on-order-fail.listener.ts       # ì£¼ë¬¸ ìƒíƒœ ë¡¤ë°±           â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ domain/                                                             â”‚ â”‚
â”‚  â”‚ â””â”€â”€ infrastructure/                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“¦ PRODUCT ë„ë©”ì¸ (src/product/)                                        â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ ì±…ì„: ìƒí’ˆ ê´€ë¦¬, ì¬ê³  ê´€ë¦¬, íŒë§¤ ë­í‚¹ ì§‘ê³„                              â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ product.module.ts                                                   â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ application/                                                        â”‚ â”‚
â”‚  â”‚ â”‚   â”œâ”€â”€ get-products.use-case.ts                                       â”‚ â”‚
â”‚  â”‚ â”‚   â””â”€â”€ listeners/                                                      â”‚ â”‚
â”‚  â”‚ â”‚       â”œâ”€â”€ on-order-processing.listener.ts  # ì¬ê³  í™•ì • ì°¨ê°          â”‚ â”‚
â”‚  â”‚ â”‚       â”œâ”€â”€ on-order-processed.listener.ts   # íŒë§¤ ë­í‚¹ ì§‘ê³„          â”‚ â”‚
â”‚  â”‚ â”‚       â””â”€â”€ on-order-fail.listener.ts        # ì¬ê³  ë¡¤ë°±               â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ domain/                                                             â”‚ â”‚
â”‚  â”‚ â””â”€â”€ infrastructure/                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ·ï¸ COUPON ë„ë©”ì¸ (src/coupon/)                                          â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ ì±…ì„: ì¿ í° ë°œê¸‰, ì¿ í° ì‚¬ìš©/ì·¨ì†Œ ì²˜ë¦¬                                    â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ coupon.module.ts                                                    â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ application/                                                        â”‚ â”‚
â”‚  â”‚ â”‚   â”œâ”€â”€ issue-coupon.use-case.ts                                       â”‚ â”‚
â”‚  â”‚ â”‚   â””â”€â”€ listeners/                                                      â”‚ â”‚
â”‚  â”‚ â”‚       â”œâ”€â”€ on-order-processing.listener.ts  # ì¿ í° ì‚¬ìš© ì²˜ë¦¬          â”‚ â”‚
â”‚  â”‚ â”‚       â””â”€â”€ on-order-fail.listener.ts        # ì¿ í° ì‚¬ìš© ì·¨ì†Œ          â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ domain/                                                             â”‚ â”‚
â”‚  â”‚ â””â”€â”€ infrastructure/                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ USER ë„ë©”ì¸ (src/user/)                                              â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ ì±…ì„: ì‚¬ìš©ì ê´€ë¦¬, ì”ì•¡ ì¶©ì „/ì°¨ê°                                       â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ user.module.ts                                                      â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ application/                                                        â”‚ â”‚
â”‚  â”‚ â”‚   â”œâ”€â”€ charge-balance.use-case.ts                                     â”‚ â”‚
â”‚  â”‚ â”‚   â””â”€â”€ listeners/                                                      â”‚ â”‚
â”‚  â”‚ â”‚       â””â”€â”€ on-order-payment.listener.ts     # ì”ì•¡ ì°¨ê°               â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ domain/                                                             â”‚ â”‚
â”‚  â”‚ â””â”€â”€ infrastructure/                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ›’ CART ë„ë©”ì¸ (src/cart/)                                              â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ ì±…ì„: ì¥ë°”êµ¬ë‹ˆ ê´€ë¦¬                                                     â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ cart.module.ts                                                      â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ application/                                                        â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ domain/                                                             â”‚ â”‚
â”‚  â”‚ â””â”€â”€ infrastructure/                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ë„ë©”ì¸ ê°„ í†µì‹  ë°©ì‹

| í†µì‹  ìœ í˜•              | ë°©ì‹                      | ì‚¬ìš© ì‚¬ë¡€                            |
| ---------------------- | ------------------------- | ------------------------------------ |
| **ë„ë©”ì¸ ë‚´ë¶€**        | ì§ì ‘ í˜¸ì¶œ (DomainService) | ì£¼ë¬¸ ìƒì„± ì‹œ OrderDomainService í˜¸ì¶œ |
| **ë„ë©”ì¸ ê°„ (ë™ê¸°)**   | ì´ë²¤íŠ¸ (emitAsync)        | ê²°ì œ ì‹œ ì¬ê³ /ì¿ í°/ì”ì•¡ ì²˜ë¦¬          |
| **ë„ë©”ì¸ ê°„ (ë¹„ë™ê¸°)** | ì´ë²¤íŠ¸ (emit)             | ë°ì´í„° í”Œë«í¼ ì „ì†¡, ë­í‚¹ ì§‘ê³„        |

### 4.3 ë„ë©”ì¸ë³„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë„ë©”ì¸ë³„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ êµ¬ì¡°                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“¦ ORDER ë„ë©”ì¸                                                         â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ â€¢ OnOrderProcessedListener: ë°ì´í„° í”Œë«í¼ ì „ì†¡                          â”‚ â”‚
â”‚  â”‚ â€¢ OnOrderFailListener: ì£¼ë¬¸ ìƒíƒœ ë¡¤ë°± (PAID â†’ PENDING)                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“¦ PRODUCT ë„ë©”ì¸                                                       â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ â€¢ OnOrderProcessingListener: ì¬ê³  í™•ì • ì°¨ê°                             â”‚ â”‚
â”‚  â”‚ â€¢ OnOrderProcessedListener: íŒë§¤ ë­í‚¹ ì—…ë°ì´íŠ¸ (Redis)                  â”‚ â”‚
â”‚  â”‚ â€¢ OnOrderFailListener: ì¬ê³  ë¡¤ë°± (í™•ì • â†’ ì„ ì )                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ·ï¸ COUPON ë„ë©”ì¸                                                        â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ â€¢ OnOrderProcessingListener: ì¿ í° ì‚¬ìš© ì²˜ë¦¬ (Redis â†’ DB ë™ê¸°í™”)         â”‚ â”‚
â”‚  â”‚ â€¢ OnOrderFailListener: ì¿ í° ì‚¬ìš© ì·¨ì†Œ (Redis ë¡¤ë°±)                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ‘¤ USER ë„ë©”ì¸                                                          â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ â€¢ OnOrderPaymentListener: ì”ì•¡ ì°¨ê° (ë‚™ê´€ì  ì ê¸ˆ + ì¬ì‹œë„)              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 ê´€ì‹¬ì‚¬ ë¶„ë¦¬ íš¨ê³¼

| í•­ëª©               | AS-IS                                            | TO-BE                                        |
| ------------------ | ------------------------------------------------ | -------------------------------------------- |
| **ì˜ì¡´ì„± ë°©í–¥**    | UseCase â†’ Product, Coupon, User ì„œë¹„ìŠ¤ ì§ì ‘ ì˜ì¡´ | UseCase â†’ EventEmitterë§Œ ì˜ì¡´ (100% ë¶„ë¦¬)    |
| **íŠ¸ëœì­ì…˜ ê´€ë¦¬**  | UseCaseì˜ catchì—ì„œ ì»¤ë°‹ ìƒíƒœ ì²´í¬ í›„ ë¡¤ë°±       | ê° ë¦¬ìŠ¤ë„ˆê°€ ìì²´ íŠ¸ëœì­ì…˜ + ì‹¤íŒ¨ ì´ë²¤íŠ¸ ë°œí–‰ |
| **ë³´ìƒ íŠ¸ëœì­ì…˜**  | UseCaseì— ë¡¤ë°± ë¡œì§ ì§‘ì¤‘                         | ê° ë„ë©”ì¸ì´ ìì²´ ë¡¤ë°± ë¦¬ìŠ¤ë„ˆ ë³´ìœ             |
| **ì½”ë“œ ë³€ê²½ ì˜í–¥** | í•˜ë‚˜ì˜ ë³€ê²½ì´ UseCaseì— ì˜í–¥                     | í•´ë‹¹ ë¦¬ìŠ¤ë„ˆë§Œ ë³€ê²½                           |
| **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**  | ëª¨ë“  ì˜ì¡´ì„± Mock í•„ìš”                            | ì´ë²¤íŠ¸ ë°œí–‰/ìˆ˜ì‹ ë§Œ í…ŒìŠ¤íŠ¸                    |
| **í™•ì¥ì„±**         | ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ UseCase ìˆ˜ì •                     | ìƒˆ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë§Œìœ¼ë¡œ í™•ì¥                    |

---

## 5. í•µì‹¬ ë¡œì§ê³¼ ë¶€ê°€ ë¡œì§ ë¶„ë¦¬

### 5.1 í•µì‹¬ ë¡œì§ vs ë¶€ê°€ ë¡œì§ ë¶„ë¥˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      í•µì‹¬ ë¡œì§ vs ë¶€ê°€ ë¡œì§ ë¶„ë¥˜                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”´ í•µì‹¬ ë¡œì§ (Core Business Logic)                                      â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ â€¢ ì‹¤íŒ¨ ì‹œ ì „ì²´ ë¹„ì¦ˆë‹ˆìŠ¤ê°€ ì‹¤íŒ¨í•´ì•¼ í•¨                                   â”‚ â”‚
â”‚  â”‚ â€¢ ì¦‰ê°ì ì¸ ë°ì´í„° ì¼ê´€ì„± í•„ìˆ˜                                           â”‚ â”‚
â”‚  â”‚ â€¢ ë™ê¸° ì´ë²¤íŠ¸ (emitAsync)ë¡œ ì²˜ë¦¬                                        â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ êµ¬í˜„:                                                                    â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ ì¬ê³  í™•ì • ì°¨ê° (order.processing â†’ Product ë¦¬ìŠ¤ë„ˆ)                  â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ ì¿ í° ì‚¬ìš© ì²˜ë¦¬ (order.processing â†’ Coupon ë¦¬ìŠ¤ë„ˆ)                   â”‚ â”‚
â”‚  â”‚ â””â”€â”€ ì”ì•¡ ì°¨ê° (order.payment â†’ User ë¦¬ìŠ¤ë„ˆ)                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸŸ¢ ë¶€ê°€ ë¡œì§ (Side Effects)                                             â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ â€¢ ì‹¤íŒ¨í•´ë„ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ì— ì˜í–¥ ì—†ìŒ                                    â”‚ â”‚
â”‚  â”‚ â€¢ ìµœì¢… ì¼ê´€ì„± í—ˆìš© (ë‚˜ì¤‘ì— ì²˜ë¦¬í•´ë„ ë¨)                                 â”‚ â”‚
â”‚  â”‚ â€¢ ë¹„ë™ê¸° ì´ë²¤íŠ¸ (emit)ë¡œ ì²˜ë¦¬ - Fire & Forget                           â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ êµ¬í˜„:                                                                    â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ ë°ì´í„° í”Œë«í¼ ì „ì†¡ (order.processed â†’ Order ë¦¬ìŠ¤ë„ˆ)                 â”‚ â”‚
â”‚  â”‚ â””â”€â”€ ì¸ê¸°ìƒí’ˆ ë­í‚¹ ì§‘ê³„ (order.processed â†’ Product ë¦¬ìŠ¤ë„ˆ)               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ë°ì´í„° í”Œë«í¼ ì „ì†¡ - í•µì‹¬ ë¡œì§ì— ì˜í–¥ ì—†ëŠ” êµ¬í˜„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ë°ì´í„° í”Œë«í¼ ì „ì†¡ì´ í•µì‹¬ ë¡œì§ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” êµ¬ì¡°              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ProcessPaymentUseCase                                                    â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚   // 1ë‹¨ê³„: í•µì‹¬ ë¡œì§ (ë™ê¸° - ì‹¤íŒ¨ ì‹œ ë¡¤ë°±)                             â”‚ â”‚
â”‚  â”‚   await this.eventEmitter.emitAsync('order.processing', event);         â”‚ â”‚
â”‚  â”‚   // â†’ ì¬ê³  ì°¨ê°, ì¿ í° ì‚¬ìš©                                             â”‚ â”‚
â”‚  â”‚   // â†’ ì‹¤íŒ¨ ì‹œ Exception ì „íŒŒ â†’ ê²°ì œ ì‹¤íŒ¨                               â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚   // 2ë‹¨ê³„: í•µì‹¬ ë¡œì§ (ë™ê¸° - ì‹¤íŒ¨ ì‹œ ë¡¤ë°±)                             â”‚ â”‚
â”‚  â”‚   await this.eventEmitter.emitAsync('order.payment', event);            â”‚ â”‚
â”‚  â”‚   // â†’ ì”ì•¡ ì°¨ê°                                                        â”‚ â”‚
â”‚  â”‚   // â†’ ì‹¤íŒ¨ ì‹œ Exception ì „íŒŒ â†’ ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤í–‰                      â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚   // 3ë‹¨ê³„: ë¶€ê°€ ë¡œì§ (ë¹„ë™ê¸° - Fire & Forget)                          â”‚ â”‚
â”‚  â”‚   this.eventEmitter.emit('order.processed', event);  â—„â”€â”€ await ì—†ìŒ!   â”‚ â”‚
â”‚  â”‚   // â†’ ë°ì´í„° í”Œë«í¼ ì „ì†¡, ë­í‚¹ ì§‘ê³„                                    â”‚ â”‚
â”‚  â”‚   // â†’ ì‹¤íŒ¨í•´ë„ ê²°ì œëŠ” ì´ë¯¸ ì„±ê³µ ìƒíƒœ                                   â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚   return ProcessPaymentResult.from(order, user);  // ë°”ë¡œ ì‘ë‹µ ë°˜í™˜     â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ OnOrderProcessedListener (ë°ì´í„° í”Œë«í¼ ì „ì†¡)                           â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚   @OnEvent('order.processed')                                           â”‚ â”‚
â”‚  â”‚   async handle(event: OrderProcessedEvent) {                            â”‚ â”‚
â”‚  â”‚     try {                                                                â”‚ â”‚
â”‚  â”‚       // ì™¸ë¶€ ë°ì´í„° í”Œë«í¼ìœ¼ë¡œ ì£¼ë¬¸ ì •ë³´ ì „ì†¡                          â”‚ â”‚
â”‚  â”‚       await this.sendToDataPlatform(event);                             â”‚ â”‚
â”‚  â”‚       this.logger.log('ë°ì´í„° í”Œë«í¼ ì „ì†¡ ì™„ë£Œ');                        â”‚ â”‚
â”‚  â”‚     } catch (error) {                                                    â”‚ â”‚
â”‚  â”‚       // âœ… í•µì‹¬ í¬ì¸íŠ¸: ì‹¤íŒ¨í•´ë„ ê²°ì œì— ì˜í–¥ ì—†ìŒ                      â”‚ â”‚
â”‚  â”‚       this.logger.error('ë°ì´í„° í”Œë«í¼ ì „ì†¡ ì‹¤íŒ¨', error);               â”‚ â”‚
â”‚  â”‚       // ì¬ì‹œë„ í ë“±ë¡ ë˜ëŠ” ì•Œë¦¼ ë°œì†¡                                  â”‚ â”‚
â”‚  â”‚     }                                                                    â”‚ â”‚
â”‚  â”‚   }                                                                      â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  âœ… í•µì‹¬: emit() ì‚¬ìš© (ë¹„ë™ê¸°) - await ì—†ì´ ì´ë²¤íŠ¸ ë°œí–‰                      â”‚
â”‚  âœ… íš¨ê³¼: ë°ì´í„° í”Œë«í¼ ì¥ì• /ì§€ì—°ì´ ê²°ì œ ì‘ë‹µ ì‹œê°„ì— ì˜í–¥ ì—†ìŒ              â”‚
â”‚  âœ… íš¨ê³¼: ë°ì´í„° í”Œë«í¼ ì „ì†¡ ì‹¤íŒ¨í•´ë„ ê²°ì œëŠ” ì„±ê³µ ì²˜ë¦¬ë¨                    â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ì¥ì•  ê²©ë¦¬ ì‹œë‚˜ë¦¬ì˜¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì™¸ë¶€ API(ë°ì´í„° í”Œë«í¼) ì¥ì•  ì‹œ ë™ì‘                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  [ë°ì´í„° í”Œë«í¼ API ì¥ì•  ë°œìƒ! ğŸ”´]                                           â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ProcessPaymentUseCase ì‹¤í–‰                                               â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  1. order.processing ì´ë²¤íŠ¸ (ë™ê¸°)                                      â”‚ â”‚
â”‚  â”‚     â””â”€â”€ ì¬ê³  ì°¨ê° âœ…, ì¿ í° ì‚¬ìš© âœ…                                      â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  2. order.payment ì´ë²¤íŠ¸ (ë™ê¸°)                                         â”‚ â”‚
â”‚  â”‚     â””â”€â”€ ì”ì•¡ ì°¨ê° âœ…                                                    â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  3. order.processed ì´ë²¤íŠ¸ (ë¹„ë™ê¸° - Fire & Forget)                     â”‚ â”‚
â”‚  â”‚     â”œâ”€â”€ ë°ì´í„° í”Œë«í¼ ì „ì†¡ âŒ (ì¥ì•  ë°œìƒ)                               â”‚ â”‚
â”‚  â”‚     â”‚   â””â”€â”€ ì—ëŸ¬ ë¡œê¹…, ì¬ì‹œë„ í ë“±ë¡ (ë³„ë„ ì²˜ë¦¬)                       â”‚ â”‚
â”‚  â”‚     â””â”€â”€ íŒë§¤ ë­í‚¹ ì§‘ê³„ âœ…                                               â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  4. ê²°ì œ ì‘ë‹µ ë°˜í™˜ âœ…                                                   â”‚ â”‚
â”‚  â”‚     â””â”€â”€ ì‚¬ìš©ìì—ê²Œ ê²°ì œ ì„±ê³µ ì‘ë‹µ                                       â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  âœ… ê²°ê³¼: ê²°ì œ ì„±ê³µ! ë°ì´í„° í”Œë«í¼ ì „ì†¡ì€ ë‚˜ì¤‘ì— ì¬ì‹œë„                      â”‚
â”‚  âœ… ì‚¬ìš©ì ê²½í—˜: ì¥ì•  ìƒí™©ì—ì„œë„ ì •ìƒì ì¸ ê²°ì œ ì²˜ë¦¬                          â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4 í•µì‹¬ ë¡œì§ ì‹¤íŒ¨ ì‹œ ë³´ìƒ íŠ¸ëœì­ì…˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë³´ìƒ íŠ¸ëœì­ì…˜ íë¦„ (Saga Pattern)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  [ì”ì•¡ ë¶€ì¡±ìœ¼ë¡œ order.payment ì‹¤íŒ¨ ì‹œ]                                       â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. order.processing ì„±ê³µ                                                â”‚ â”‚
â”‚  â”‚    â”œâ”€â”€ ì¬ê³  í™•ì • ì°¨ê° âœ…                                                â”‚ â”‚
â”‚  â”‚    â””â”€â”€ ì¿ í° ì‚¬ìš© ì²˜ë¦¬ âœ…                                                â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ 2. order.payment ì‹¤íŒ¨ âŒ (ì”ì•¡ ë¶€ì¡±)                                    â”‚ â”‚
â”‚  â”‚    â””â”€â”€ order.payment.fail ì´ë²¤íŠ¸ ë°œí–‰                                   â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚ 3. ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤í–‰                                                   â”‚ â”‚
â”‚  â”‚    â”œâ”€â”€ Product: ì¬ê³  ë¡¤ë°± (í™•ì • â†’ ì„ ì )                                 â”‚ â”‚
â”‚  â”‚    â”œâ”€â”€ Coupon: ì¿ í° ì‚¬ìš© ì·¨ì†Œ (Redis + DB)                              â”‚ â”‚
â”‚  â”‚    â””â”€â”€ Order: ì£¼ë¬¸ ìƒíƒœ ë¡¤ë°± (PAID â†’ PENDING)                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â”‚  [êµ¬í˜„ ì½”ë“œ]                                                                 â”‚
â”‚                                                                               â”‚
â”‚  // User: OnOrderPaymentListener                                             â”‚
â”‚  @OnEvent(OrderPaymentEvent.EVENT_NAME)                                      â”‚
â”‚  async handleUserBalanceDeductByOrder(event) {                               â”‚
â”‚    try {                                                                     â”‚
â”‚      await this.userService.deductBalance(userId, amount);                   â”‚
â”‚      return { listenerName: 'UserBalanceDeductByOrder', user };              â”‚
â”‚    } catch (error) {                                                         â”‚
â”‚      // ë³´ìƒ íŠ¸ëœì­ì…˜ íŠ¸ë¦¬ê±°                                                 â”‚
â”‚      await this.eventEmitter.emitAsync(                                      â”‚
â”‚        OrderPaymentFailEvent.EVENT_NAME,                                     â”‚
â”‚        new OrderPaymentFailEvent(...),                                       â”‚
â”‚      );                                                                      â”‚
â”‚      return { listenerName: 'UserBalanceDeductByOrder', error };             â”‚
â”‚    }                                                                         â”‚
â”‚  }                                                                           â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 ë™ì‹œì„± ì œì–´ ì „ëµ

| ë¦¬ì†ŒìŠ¤         | ë™ì‹œì„± ì œì–´ ë°©ì‹            | ëª©ì                      |
| -------------- | --------------------------- | ------------------------ |
| ì£¼ë¬¸ ê²°ì œ      | Redis ë¶„ì‚°ë½ (TTL 10s)      | ë™ì¼ ì£¼ë¬¸ ì¤‘ë³µ ê²°ì œ ë°©ì§€ |
| ìƒí’ˆ ì¬ê³       | DB ë¹„ê´€ì  ì ê¸ˆ (FOR UPDATE) | ì¬ê³  ì´ˆê³¼ íŒë§¤ ë°©ì§€      |
| ì‚¬ìš©ì ì”ì•¡    | DB ë‚™ê´€ì  ì ê¸ˆ + ì¬ì‹œë„     | ë™ì‹œ ì”ì•¡ ë³€ê²½ ì¶©ëŒ í•´ê²° |
| ì¿ í° ë°œê¸‰/ì‚¬ìš© | Redis Lua ìŠ¤í¬ë¦½íŠ¸          | ì›ìì  ì²˜ë¦¬ë¡œ ì¤‘ë³µ ë°©ì§€  |

---

## 6. ê²°ë¡ 

### 6.1 ì´ë²¤íŠ¸ ê¸°ë°˜ ì„¤ê³„ë¡œ í™•ë³´ëœ ê²ƒë“¤

```
1. ëŠìŠ¨í•œ ê²°í•© (Loose Coupling)
   â€¢ ë„ë©”ì¸ ê°„ ì§ì ‘ ì˜ì¡´ì„± ì œê±°
   â€¢ ì´ë²¤íŠ¸ë¥¼ í†µí•œ ê°„ì ‘ í†µì‹ 

2. ê´€ì‹¬ì‚¬ ë¶„ë¦¬ (Separation of Concerns)
   â€¢ ê° ë„ë©”ì¸ì´ ìì‹ ì˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë§Œ ê´€ë¦¬
   â€¢ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë„ë©”ì¸ ë‚´ë¶€ì— ìº¡ìŠí™”

3. Saga íŒ¨í„´ ê¸°ë°˜ íŠ¸ëœì­ì…˜
   â€¢ ë³´ìƒ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¶„ì‚° íŠ¸ëœì­ì…˜ ëŒ€ì²´ ê°€ëŠ¥
   â€¢ ìµœì¢… ì¼ê´€ì„±(Eventual Consistency) í—ˆìš©
```

### 6.2 ì ìš© ê²°ê³¼ ìš”ì•½

| í•­ëª©              | AS-IS                              | TO-BE                          | ê°œì„  íš¨ê³¼            |
| ----------------- | ---------------------------------- | ------------------------------ | -------------------- |
| **ë„ë©”ì¸ ê²°í•©ë„** | UseCase â†’ 4ê°œ ì„œë¹„ìŠ¤ ì§ì ‘ ì˜ì¡´     | UseCase â†’ EventEmitterë§Œ ì˜ì¡´  | **100% ê²°í•©ë„ ì œê±°** |
| **íŠ¸ëœì­ì…˜ ê´€ë¦¬** | UseCaseì˜ catchì—ì„œ ì»¤ë°‹ ìƒíƒœ ì²´í¬ | ê° ë„ë©”ì¸ì´ ìì²´ íŠ¸ëœì­ì…˜ ê´€ë¦¬ | ì±…ì„ ë¶„ì‚°            |
| **ë³´ìƒ íŠ¸ëœì­ì…˜** | UseCaseì— ë¡¤ë°± ë¡œì§ ì§‘ì¤‘           | ê° ë„ë©”ì¸ì´ ìì²´ ë¡¤ë°± ë¦¬ìŠ¤ë„ˆ   | ë³µì¡ë„ ë¶„ì‚°          |
| **í™•ì¥ì„±**        | UseCase ìˆ˜ì • í•„ìš”                  | ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë§Œ                  | ë¬´ì¤‘ë‹¨ ê¸°ëŠ¥ ì¶”ê°€     |
| **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±** | ëª¨ë“  ì˜ì¡´ì„± Mock                   | ì´ë²¤íŠ¸ë§Œ í…ŒìŠ¤íŠ¸                | í…ŒìŠ¤íŠ¸ ì½”ë“œ ê°„ì†Œí™”   |
| **MSA ì „í™˜ ì¤€ë¹„** | ì„œë¹„ìŠ¤ ë¶„ë¦¬ ì‹œ ëŒ€ê·œëª¨ ë¦¬íŒ©í† ë§     | ì´ë²¤íŠ¸ ë²„ìŠ¤ë§Œ êµì²´             | ì „í™˜ ë¹„ìš© ìµœì†Œí™”     |

### 6.3 ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ì˜ ì¥ì  ë¦¬ë·°

```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì´ë²¤íŠ¸ ê¸°ë°˜ ì™„ì „ ë¶„ë¦¬ ì•„í‚¤í…ì²˜ ì¥ì  ìš”ì•½                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚ 1ï¸âƒ£ 100% ê²°í•©ë„ ì œê±° (Zero Coupling)                                          â”‚
â”‚ â€¢ UseCaseëŠ” ì˜¤ì§ EventEmitterì™€ ìì‹ ì˜ ë„ë©”ì¸ ì„œë¹„ìŠ¤ë§Œ ì˜ì¡´                     â”‚
â”‚ â€¢ Product, Coupon, User ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì§ì ‘ ì˜ì¡´ì„± ì™„ì „ ì œê±°                     â”‚
â”‚ â€¢ MSA ì „í™˜ ì‹œ ì„œë¹„ìŠ¤ ë¶„ë¦¬ê°€ ìì—°ìŠ¤ëŸ½ê²Œ ê°€ëŠ¥                                     â”‚
â”‚                                                                               â”‚
â”‚ 2ï¸âƒ£ ììœ¨ì  íŠ¸ëœì­ì…˜ ê´€ë¦¬                                                        â”‚
â”‚ â€¢ ê° ë„ë©”ì¸ì´ ìì‹ ì˜ íŠ¸ëœì­ì…˜ì„ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬                                 â”‚
â”‚ â€¢ ì¬ê³ /ì¿ í°/ì”ì•¡ ì²˜ë¦¬ê°€ ê°œë³„ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¶„ë¦¬                                  â”‚
â”‚ â€¢ íŠ¸ëœì­ì…˜ ì¶©ëŒ ë° ë½ ê²½í•© ìµœì†Œí™”                                              â”‚
â”‚                                                                               â”‚
â”‚ 3ï¸âƒ£ ë¶„ì‚° ë³´ìƒ íŠ¸ëœì­ì…˜ (Saga Pattern)                                          â”‚
â”‚ â€¢ UseCaseëŠ” ë¡¤ë°± ë¡œì§ ì—†ìŒ (ë³µì¡ë„ ì œê±°)                                       â”‚
â”‚ â€¢ ê° ë„ë©”ì¸ì´ ìì²´ OnOrderFailListenerë¡œ ë¡¤ë°± ì²˜ë¦¬                             â”‚
â”‚ â€¢ ì‹¤íŒ¨ ì´ë²¤íŠ¸ ë°œí–‰ â†’ ê´€ë ¨ ë„ë©”ì¸ë“¤ì´ ììœ¨ì ìœ¼ë¡œ ë³´ìƒ ìˆ˜í–‰                       â”‚
â”‚                                                                              â”‚
â”‚ 4ï¸âƒ£ ì™„ì „í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬                                                        â”‚
â”‚ â€¢ Order: ì£¼ë¬¸ ìƒíƒœ ê´€ë¦¬, ë°ì´í„° í”Œë«í¼ ì „ì†¡                                   â”‚
â”‚ â€¢ Product: ì¬ê³  ê´€ë¦¬, íŒë§¤ ë­í‚¹ ì§‘ê³„                                         â”‚
â”‚ â€¢ Coupon: ì¿ í° ì‚¬ìš©/ì·¨ì†Œ ì²˜ë¦¬                                                â”‚
â”‚ â€¢ User: ì”ì•¡ ì°¨ê°/í™˜ë¶ˆ ì²˜ë¦¬                                                  â”‚
â”‚                                                                             â”‚
â”‚ 5ï¸âƒ£ ë¬´í•œ í™•ì¥ì„±                                                              â”‚
â”‚ â€¢ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ë¦¬ìŠ¤ë„ˆë§Œ ë“±ë¡ (UseCase ìˆ˜ì • ë¶ˆí•„ìš”)                      â”‚
â”‚ â€¢ ì•Œë¦¼, ë¶„ì„, ë¡œê¹… ë“± ë¶€ê°€ ê¸°ëŠ¥ ììœ ë¡­ê²Œ ì¶”ê°€                                 â”‚
â”‚ â€¢ ê¸°ì¡´ ì½”ë“œ ì˜í–¥ ì—†ì´ ê¸°ëŠ¥ í™•ì¥ ê°€ëŠ¥                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

> ğŸ“… ë¬¸ì„œ ì‘ì„±ì¼: 2025ë…„ 12ì›” 9ì¼
